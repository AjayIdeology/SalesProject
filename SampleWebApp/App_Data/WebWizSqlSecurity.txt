-- Add all users (note: user Logons must be already set up)
CREATE USER [Ada] FOR LOGIN [JonSmith_Ada] WITH DEFAULT_SCHEMA=[dbo]
CREATE USER [Charles] FOR LOGIN [JonSmith_Charles] WITH DEFAULT_SCHEMA=[dbo]
CREATE USER [Homer] FOR LOGIN [JonSmith_Homer] WITH DEFAULT_SCHEMA=[dbo]
CREATE USER [Michael] FOR LOGIN [JonSmith_Michael] WITH DEFAULT_SCHEMA=[dbo]
CREATE USER [William] FOR LOGIN [JonSmith_William] WITH DEFAULT_SCHEMA=[dbo]
-- create each role and its permissions
CREATE ROLE [AttendeeNoPayUpdate]
DENY UPDATE ON OBJECT::dbo.Attendees(HasPaid) ON [AttendeeNoPayUpdate]

CREATE ROLE [CourseRU]
DENY INSERT, DELETE ON OBJECT::dbo.Courses ON [CourseRU]
CREATE ROLE [AttendeeNoPay]
DENY SELECT, UPDATE ON OBJECT::dbo.Attendees(HasPaid) ON [AttendeeNoPay]
CREATE ROLE [CourseReadOnly]
DENY INSERT, UPDATE, DELETE, REFERENCE ON OBJECT::dbo.Courses ON [CourseReadOnly]
CREATE ROLE [DenyAttendee]
DENY INSERT, SELECT, UPDATE, DELETE ON OBJECT::dbo.Attendees ON [DenyAttendee]
-- add each user to its roles
ALTER ROLE [AttendeeNoPayUpdate] ADD MEMBER [Ada]
ALTER ROLE [db_owner] ADD MEMBER [Ada]
ALTER ROLE [CourseRU] ADD MEMBER [Charles]
ALTER ROLE [AttendeeNoPay] ADD MEMBER [Charles]
ALTER ROLE [db_owner] ADD MEMBER [Charles]
ALTER ROLE [CourseReadOnly] ADD MEMBER [Homer]
ALTER ROLE [DenyAttendee] ADD MEMBER [Homer]
ALTER ROLE [db_owner] ADD MEMBER [Homer]
ALTER ROLE [CourseReadOnly] ADD MEMBER [Michael]
ALTER ROLE [AttendeeNoPay] ADD MEMBER [Michael]
ALTER ROLE [db_owner] ADD MEMBER [Michael]
ALTER ROLE [CourseReadOnly] ADD MEMBER [William]
ALTER ROLE [db_owner] ADD MEMBER [William]
